# 文档生成问答对
基于本地大模型的文档全流程结构化问答对抽取工具，支持从原始文档到结构化QA对的自动化处理，专为大模型有监督微调（SFT）打造。

## 核心特性
- 📋 **全流程处理**：从原始文档→文本文件→结构化QA对，两步完成，无需额外格式转换
- 📌 **双格式输出**：支持Alpaca（instruction/input/output）、ShareGPT（conversations）微调格式
- ⚡ **多卡加速**：多进程多GPU并行处理，进程与GPU一一绑定，大幅提升大批量数据处理效率
- ✂️ **智能分块**：按段落/句子层级拆分长文本，保留语义完整性，支持分块参数自定义
- 🧹 **深度清洗**：自动剔除模糊代词（这/该/其）、文件溯源信息（《xxx》/文号）、冗余格式，生成纯知识QA对
- 🔍 **质量管控**：内置QA长度过滤、有效性校验、基于问题内容的去重机制，拒绝低质/重复数据
- 🖥️ **本地推理**：兼容所有Hugging Face格式大模型，无外部API依赖，数据本地处理更安全

## 项目文件说明
| 脚本名称　　　| 功能说明　　　　　 | 适用场景　　　　　　　　　　　　　　　　　　　　　　　　　 |
| ---------------| --------------------| ------------------------------------------------------------|
| `doc2text.py` | 文档转文本工具　　 | 将原始源文档转为工具可识别的文本文件，为后续QA抽取做准备　 |
| `run.sh`　　　| QA抽取一键执行脚本 | 封装QA生成核心参数，配置路径后一键运行，无需手动输入长命令 |
| `model.py`　　| 文本生成问答对　　 | -　　　　　　　　　　　　　　　　　　　　　　　　　　　　　|

## 全流程操作步骤

- 📋 步骤 1：文档转文本（doc2text.py）
打开doc2text.py文件，在文件末尾配置输入文件地址（待处理的源文档路径）和输出文件地址（转换后文本的保存路径）；直接执行以下 Python 命令完成文档转文本：
   ```bash
  python doc2text.py
     ```
- 📋 步骤 2：文本抽取问答对（run.sh）
打开run.sh脚本文件，在文件中配置好输入地址（上一步转换后的文本文件路径）和输出地址（结构化问答对的保存路径）；执行以下 Shell 命令完成问答对抽取：
   ```bash
  bash run.sh
     ```
